# Copilot Agent Instructions

## Project Overview
This is a lightweight multiplayer shmup (shoot-em-up) game designed for office deployment.

## Core Architecture (CRITICAL - Always Reference)
- **Single-server, single-game-world** design (see GAME_DESIGN.md)
- **No rooms/lobbies** - all players in same shared world
- **5-minute matches** with 2-minute intermissions
- **Handle reservation system** for player identity
- **Relegation system** for inactive players to viewer status

## Development Constraints
- **Time-boxing**: All tasks must be 15-20 minutes maximum
- **Iteration limit**: Maximum 3 attempts per issue before escalation
- **Context requirement**: Always read GAME_DESIGN.md before architectural decisions
- **Template usage**: Use existing templates in .github/copilot-tasks/ and .github/ISSUE_TEMPLATE/

## Technology Stack
- **Backend**: TypeScript, Node.js, WebSocket for real-time communication
- **Frontend**: React, TypeScript
- **Testing**: Jest for unit tests, Playwright for E2E
- **Storage**: In-memory initially (no database)

## Common Patterns
1. **State Management**: Game state stored in memory on server
2. **Communication**: WebSocket messages for real-time updates
3. **Player Management**: Handle-based identity system
4. **Testing**: Test setup in 5-7 minutes, implementation in 7-10 minutes

## Task Execution Rules
1. **Before starting**: Read relevant context files (GAME_DESIGN.md, etc.)
2. **During implementation**: Follow existing patterns and architecture
3. **If stuck**: Comment on issue with specific blocker, don't exceed 3 attempts
4. **Documentation**: Update relevant docs within the 15-20 minute window

## Critical Files to Reference
- `GAME_DESIGN.md` - Complete architecture specification
- `.github/PROJECT_MANAGEMENT.md` - Workflow and process rules
- `.github/COPILOT_WORKFLOW.md` - Agent-specific guidelines

## Escalation Triggers
- Task exceeds 20 minutes
- Architecture conflicts with GAME_DESIGN.md
- Dependencies missing from previous tasks
- Scope creep beyond single focused change

## Success Criteria
- Working code with tests
- Follows single-server architecture
- Maintains 15-20 minute scope
- Updates documentation appropriately
